interactions:
- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Host:
      - cbr.ap-southeast-1.myhuaweicloud.com
      User-Agent:
      - huaweicloud-usdk-python/3.0
      X-Project-Id:
      - ap-southeat-1
      X-Sdk-Date:
      - 20250325T013806Z
    method: GET
    uri: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/ap-southeat-1/vaults?limit=100&offset=0
  response:
    body:
      string: '{"vaults":[{"id":"06e844ba-d4bf-40be-b07f-c60d3c2ce679","name":"vault-4eb7","description":null,"resources":[{"id":"7a84f97a-8ddc-4e5d-b228-a80fe5465508","type":"OS::Cinder::Volume","name":"volume-encrypted","auto_protect":true,"size":10,"backup_size":0,"backup_count":1,"protect_status":"available","extra_info":{}}],"provider_id":"d1603440-187d-4516-af25-121250c7cc97","created_at":"2025-03-25T06:12:48.673924","project_id":"0d9da8861b80f5a32fb4c00645f2dbd7","enterprise_project_id":"d522b930-e31e-455f-b54e-f8ebdd7c94cd","auto_bind":false,"bind_rules":{},"auto_expand":false,"smn_notify":true,"threshold":80,"user_id":"658345a2dbeb46e69220a04a455a4fb1","billing":{"allocated":10,"cloud_type":"public","consistent_level":"crash_consistent","frozen_scene":null,"charging_mode":"post_paid","order_id":null,"product_id":null,"protect_type":"backup","object_type":"disk","spec_code":"vault.backup.volume.normal","is_multi_az":false,"is_double_az":false,"used":0,"storage_unit":null,"status":"available","size":50,"partner_bp_id":null},"tags":[],"backup_name_prefix":null,"demand_billing":false,"cbc_delete_count":0,"frozen":false,"availability_zone":"","sys_lock_source_service":"","supplier":"","locked":false,"cross_account":false,"cross_account_urn":""},{"id":"42da2015-a512-481a-9c86-f02c08cffc10","name":"vault-e380-custodian","description":null,"resources":[{"id":"bf624d88-d268-423c-8206-934120da9e43","type":"OS::Nova::Server","name":"ecs-zs-custodian","auto_protect":true,"size":50,"backup_size":17048,"backup_count":2,"protect_status":"available","extra_info":{}}],"provider_id":"0daac4c5-6707-4851-97ba-169e36266b66","created_at":"2025-03-22T02:59:06.548293","project_id":"0d9da8861b80f5a32fb4c00645f2dbd7","enterprise_project_id":"d522b930-e31e-455f-b54e-f8ebdd7c94cd","auto_bind":false,"bind_rules":{"tags":[]},"auto_expand":false,"smn_notify":true,"threshold":80,"user_id":"658345a2dbeb46e69220a04a455a4fb1","billing":{"allocated":50,"cloud_type":"public","consistent_level":"crash_consistent","frozen_scene":null,"charging_mode":"post_paid","order_id":null,"product_id":null,"protect_type":"backup","object_type":"server","spec_code":"vault.backup.server.normal","is_multi_az":false,"is_double_az":false,"used":17048,"storage_unit":null,"status":"available","size":100,"partner_bp_id":null},"tags":[],"backup_name_prefix":null,"demand_billing":false,"cbc_delete_count":0,"frozen":false,"availability_zone":"","sys_lock_source_service":"","supplier":"","locked":false,"cross_account":false,"cross_account_urn":""}, {"id":"78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92","name":"vault-d9a6","description":null,"resources":[{"id":"edad56cc-577c-494f-81c6-f3378a6dda16","type":"OS::Nova::Server","name":"ecs-7d7b","auto_protect":true,"size":40,"backup_size":0,"backup_count":0,"protect_status":"deleted","extra_info":{}}],"provider_id":"0daac4c5-6707-4851-97ba-169e36266b66","created_at":"2025-03-05T08:21:03.410568","project_id":"0d9da8861b80f5a32fb4c00645f2dbd7","enterprise_project_id":"0","auto_bind":false,"bind_rules":{"tags":[]},"auto_expand":false,"smn_notify":true,"threshold":80,"user_id":"0ce6529ea38010d61fd4c0063b348920","billing":{"allocated":40,"cloud_type":"public","consistent_level":"crash_consistent","frozen_scene":null,"charging_mode":"post_paid","order_id":null,"product_id":null,"protect_type":"backup","object_type":"server","spec_code":"vault.backup.server.normal","is_multi_az":false,"is_double_az":false,"used":0,"storage_unit":null,"status":"available","size":100,"partner_bp_id":null},"tags":[],"backup_name_prefix":null,"demand_billing":false,"cbc_delete_count":0,"frozen":false,"availability_zone":"","sys_lock_source_service":"","supplier":"","locked":false,"cross_account":false,"cross_account_urn":""}],"count":3,"offset":0,"limit":100}'
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Tue, 25 Mar 2025 01:38:07 GMT
      Server:
      - api-gateway
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains;
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - 3518a87566a0a29e3b6bfc61815f4145
      X-XSS-Protection:
      - 1; mode=block;
    status: {code: 200, message: OK}

- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Host:
      - cbr.ap-southeast-1.myhuaweicloud.com
      User-Agent:
      - huaweicloud-usdk-python/3.0
      X-Project-Id:
      - ap-southeat-1
      X-Sdk-Date:
      - 20250325T013806Z
    method: POST
    uri: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/ap-southeat-1/policies
  response:
    body:
      string: '{"policy": {"id": "new_policy_id1", "name": "weekly_create_backup", "operation_type": "backup", "operation_definition": {"retention_duration_days": 30, "full_backup_interval": -1, "created_by": "customer"}, "enabled": true, "trigger": {"id": "e61e838f-6019-4f79-92b4-66c3ab5817ff", "name": "default", "type": "time", "properties": {"pattern": ["FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR,SA,SU;BYHOUR=09;BYMINUTE=00"], "start_time": "2025-03-25 07:59:52"}}, "associated_vaults": null}}'
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Tue, 25 Mar 2025 01:38:07 GMT
      Server:
      - api-gateway
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains;
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - 3518a87566a0a29e3b6bfc61815f4145
      X-XSS-Protection:
      - 1; mode=block;
    status: {code: 200, message: OK}

- request:
    body: '{"policy_id": "new_policy_id1"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Host:
      - cbr.ap-southeast-1.myhuaweicloud.com
      User-Agent:
      - huaweicloud-usdk-python/3.0
      X-Project-Id:
      - ap-southeat-1
      X-Sdk-Date:
      - 20250325T013806Z
    method: POST
    uri: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/ap-southeat-1/vaults/42da2015-a512-481a-9c86-f02c08cffc10/associatepolicy
  response:
    body:
      string: '{"associate_policy": {"vault_id": "42da2015-a512-481a-9c86-f02c08cffc10", "policy_id": "new_policy_id1"}}'
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Tue, 25 Mar 2025 01:38:07 GMT
      Server:
      - api-gateway
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains;
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - 3518a87566a0a29e3b6bfc61815f4145
      X-XSS-Protection:
      - 1; mode=block;
    status: {code: 200, message: OK}

- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Host:
      - cbr.ap-southeast-1.myhuaweicloud.com
      User-Agent:
      - huaweicloud-usdk-python/3.0
      X-Project-Id:
      - ap-southeat-1
      X-Sdk-Date:
      - 20250325T013806Z
    method: POST
    uri: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/ap-southeat-1/policies
  response:
    body:
      string: '{"policy": {"id": "new_policy_id2", "name": "weekly_create_backup", "operation_type": "backup", "operation_definition": {"retention_duration_days": 30, "full_backup_interval": -1, "created_by": "customer"}, "enabled": true, "trigger": {"id": "e61e838f-6019-4f79-92b4-66c3ab5817ff", "name": "default", "type": "time", "properties": {"pattern": ["FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR,SA,SU;BYHOUR=09;BYMINUTE=00"], "start_time": "2025-03-25 07:59:52"}}, "associated_vaults": null}}'
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Tue, 25 Mar 2025 01:38:07 GMT
      Server:
      - api-gateway
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains;
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - 3518a87566a0a29e3b6bfc61815f4145
      X-XSS-Protection:
      - 1; mode=block;
    status: {code: 200, message: OK}

- request:
    body: '{"policy_id": "new_policy_id2"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Host:
      - cbr.ap-southeast-1.myhuaweicloud.com
      User-Agent:
      - huaweicloud-usdk-python/3.0
      X-Project-Id:
      - ap-southeat-1
      X-Sdk-Date:
      - 20250325T013806Z
    method: POST
    uri: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/ap-southeat-1/vaults/06e844ba-d4bf-40be-b07f-c60d3c2ce679/associatepolicy
  response:
    body:
      string: '{"associate_policy": {"vault_id": "06e844ba-d4bf-40be-b07f-c60d3c2ce679", "policy_id": "new_policy_id2"}}'
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Tue, 25 Mar 2025 01:38:07 GMT
      Server:
      - api-gateway
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains;
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - 3518a87566a0a29e3b6bfc61815f4145
      X-XSS-Protection:
      - 1; mode=block;
    status: {code: 200, message: OK}

- request:
    body: null
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Host:
      - cbr.ap-southeast-1.myhuaweicloud.com
      User-Agent:
      - huaweicloud-usdk-python/3.0
      X-Project-Id:
      - ap-southeat-1
      X-Sdk-Date:
      - 20250325T013806Z
    method: POST
    uri: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/ap-southeat-1/policies
  response:
    body:
      string: '{"policy": {"id": "new_policy_id3", "name": "weekly_create_backup", "operation_type": "backup", "operation_definition": {"retention_duration_days": 30, "full_backup_interval": -1, "created_by": "customer"}, "enabled": true, "trigger": {"id": "e61e838f-6019-4f79-92b4-66c3ab5817ff", "name": "default", "type": "time", "properties": {"pattern": ["FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR,SA,SU;BYHOUR=09;BYMINUTE=00"], "start_time": "2025-03-25 07:59:52"}}, "associated_vaults": null}}'
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Tue, 25 Mar 2025 01:38:07 GMT
      Server:
      - api-gateway
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains;
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - 3518a87566a0a29e3b6bfc61815f4145
      X-XSS-Protection:
      - 1; mode=block;
    status: {code: 200, message: OK}

- request:
    body: '{"policy_id": "new_policy_id3"}'
    headers:
      Accept:
      - '*/*'
      Accept-Encoding:
      - gzip, deflate
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Host:
      - cbr.ap-southeast-1.myhuaweicloud.com
      User-Agent:
      - huaweicloud-usdk-python/3.0
      X-Project-Id:
      - ap-southeat-1
      X-Sdk-Date:
      - 20250325T013806Z
    method: POST
    uri: https://cbr.ap-southeast-1.myhuaweicloud.com/v3/ap-southeat-1/vaults/78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92/associatepolicy
  response:
    body:
      string: '{"associate_policy": {"vault_id": "78fe6b2b-15e1-4fce-9cd9-4cbb5021fe92", "policy_id": "new_policy_id3"}}'
    headers:
      Connection:
      - keep-alive
      Content-Type:
      - application/json
      Date:
      - Tue, 25 Mar 2025 01:38:07 GMT
      Server:
      - api-gateway
      Strict-Transport-Security:
      - max-age=31536000; includeSubdomains;
      Transfer-Encoding:
      - chunked
      X-Content-Type-Options:
      - nosniff
      X-Download-Options:
      - noopen
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - 3518a87566a0a29e3b6bfc61815f4145
      X-XSS-Protection:
      - 1; mode=block;
    status: {code: 200, message: OK}
version: 1

